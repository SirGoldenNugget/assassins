(this.webpackJsonpassassins=this.webpackJsonpassassins||[]).push([[0],{65:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(1),r=a.n(n),c=a(31),i=a.n(c),o=a(11),l=a(12),u=a(14),b=a(13),j=(a(38),a(5)),d=a(2),h=a(10),m=a.n(h),O=a(16),p=Object(n.createContext)(),v=function(e){var t=e.children,a=Object(n.useState)(""),r=Object(O.a)(a,2),c=r[0],i=r[1],o=Object(n.useState)(""),l=Object(O.a)(o,2),u=l[0],b=l[1],j=Object(n.useState)(""),d=Object(O.a)(j,2),h=d[0],m=d[1],v=Object(n.useState)(!1),x=Object(O.a)(v,2),f=x[0],g=x[1],y=Object(n.useState)(!1),C=Object(O.a)(y,2),N=C[0],P=C[1],S=Object(n.useState)(!0),w=Object(O.a)(S,2),k=w[0],T=w[1];return Object(s.jsx)(p.Provider,{value:{username:c,setUsername:i,partyCode:u,setPartyCode:b,target:h,setTarget:m,isAdmin:f,setIsAdmin:g,isAuth:N,setIsAuth:P,isAlive:k,setIsAlive:T},children:t})};function x(){var e=Object(n.useContext)(p);return Object(s.jsxs)("div",{children:[Object(s.jsx)("li",{className:"navbar-item",children:Object(s.jsx)(j.b,{to:"/",className:"nav-link",onClick:function(t){t.preventDefault(),m.a.get("/api/logout",{withCredentials:!0}).then((function(t){console.log(t),200===t.status&&(e.setIsAuth(!1),e.setUsername(""),e.setPartyCode(""))}))},children:"Logout"})}),Object(s.jsx)("li",{className:"navbar-item",children:Object(s.jsx)(j.b,{to:"/profile",className:"nav-link",children:"Profile"})})]})}function f(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("li",{className:"navbar-item",children:Object(s.jsx)(j.b,{to:"/login",className:"nav-link",children:"Login"})}),Object(s.jsx)("li",{className:"navbar-item",children:Object(s.jsx)(j.b,{to:"/register",className:"nav-link",children:"Register"})})]})}function g(){var e=Object(n.useContext)(p);return Object(s.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(s.jsx)(j.b,{to:"/",className:"navbar-brand",children:"Assassins"}),Object(s.jsx)("div",{className:"collpase navbar-collapse",children:Object(s.jsx)("ul",{className:"navbar-nav mr-auto",children:e.isAuth?Object(s.jsx)(x,{}):Object(s.jsx)(f,{})})})]})}var y=a(18),C=a(4),N=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).onChange=s.onChange.bind(Object(C.a)(s)),s.onSubmit=s.onSubmit.bind(Object(C.a)(s)),s.state={username:"",password:"",error:!1},s}return Object(l.a)(a,[{key:"onChange",value:function(e){var t=e.target,a=t.name,s=t.value;this.setState(Object(y.a)({},a,s))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={username:this.state.username,password:this.state.password};console.log(a),m.a.post("/api/login",a,{withCredentials:!0}).then((function(e){console.log(e),200===e.status&&(t.context.setIsAuth(!0),t.context.setUsername(e.data.username),t.context.setPartyCode(e.data.partyCode),t.context.setIsAdmin(e.data.isAdmin),t.setState({redirectTo:"/"}))})).catch((function(e){console.log(e),401===e.response.status&&t.setState({error:!0})}))}},{key:"canSubmit",value:function(){return this.state.username.length>0&&this.state.password.length>0}},{key:"render",value:function(){return this.state.redirectTo?Object(s.jsx)(d.a,{to:{pathname:this.state.redirectTo}}):Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Login"}),this.state.error&&Object(s.jsx)("div",{className:"alert alert-danger",role:"alert",children:"Invalid username and/or password."}),Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Username: "}),Object(s.jsx)("input",{type:"text",required:!0,name:"username",className:"form-control",value:this.state.username,onChange:this.onChange})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Password: "}),Object(s.jsx)("input",{type:"password",name:"password",className:"form-control",value:this.state.password,onChange:this.onChange})]}),Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("input",{type:"submit",value:"Login",className:"btn btn-primary",disabled:!this.canSubmit()})})]})]})}}]),a}(n.Component);N.contextType=p;var P=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).onChange=s.onChange.bind(Object(C.a)(s)),s.canSubmit=s.canSubmit.bind(Object(C.a)(s)),s.onSubmit=s.onSubmit.bind(Object(C.a)(s)),s.state={username:"",password:"",confirmPassword:"",error:!1},s}return Object(l.a)(a,[{key:"onChange",value:function(e){var t=e.target,a=t.name,s=t.value;this.setState(Object(y.a)({},a,s))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={username:this.state.username,password:this.state.password};console.log(a),m.a.post("/api/register",a,{withCredentials:!0}).then((function(e){200===e.status&&(t.context.setUsername(a.username),t.context.setIsAuth(!0),t.setState({redirectTo:"/"}))})).catch((function(e){console.log(e),401===e.response.status&&t.setState({error:!0})}))}},{key:"canSubmit",value:function(){return this.state.username.length>0&&this.state.password.length>0&&this.state.password===this.state.confirmPassword}},{key:"render",value:function(){return this.state.redirectTo?Object(s.jsx)(d.a,{to:{pathname:this.state.redirectTo}}):Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Register"}),this.state.error&&Object(s.jsx)("div",{className:"alert alert-danger",role:"alert",children:"Username is already in use."}),Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Username: "}),Object(s.jsx)("input",{type:"text",name:"username",required:!0,className:"form-control",value:this.state.username,onChange:this.onChange})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Password: "}),Object(s.jsx)("input",{type:"password",name:"password",className:"form-control",value:this.state.password,onChange:this.onChange})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Confirm Password: "}),Object(s.jsx)("input",{type:"password",name:"confirmPassword",className:"form-control",value:this.state.confirmPassword,onChange:this.onChange})]}),Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("input",{type:"submit",value:"Register",disabled:!this.canSubmit(),className:"btn btn-primary"})})]})]})}}]),a}(n.Component);P.contextType=p;var S=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).onLeaveParty=s.onLeaveParty.bind(Object(C.a)(s)),s.onStartParty=s.onStartParty.bind(Object(C.a)(s)),s.state={},s}return Object(l.a)(a,[{key:"onStartParty",value:function(e){e.preventDefault()}},{key:"onLeaveParty",value:function(e){e.preventDefault(),this.context.setPartyCode("")}},{key:"render",value:function(){return this.state.redirectTo?Object(s.jsx)(d.a,{to:{pathname:this.state.redirectTo}}):Object(s.jsxs)("div",{className:"text-center",children:[Object(s.jsxs)("h4",{children:["Party Code: ",Object(s.jsx)("b",{children:this.context.partyCode})]}),Object(s.jsx)("label",{className:"col-sm-2 col-form-label",children:"Target"}),this.context.isAdmin&&Object(s.jsx)("form",{onSubmit:this.onStartParty,children:Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("input",{type:"submit",value:"Start Party",className:"btn btn-primary"})})}),Object(s.jsx)("form",{onSubmit:this.onLeaveParty,children:Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("input",{type:"submit",value:"Leave Party",className:"btn btn-primary"})})})]})}}]),a}(n.Component);S.contextType=p;var w=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).onJoinParty=s.onJoinParty.bind(Object(C.a)(s)),s.onChangePartyCode=s.onChangePartyCode.bind(Object(C.a)(s)),s.onCreateParty=s.onCreateParty.bind(Object(C.a)(s)),s.state={partyCode:"",error:!1},s}return Object(l.a)(a,[{key:"onJoinParty",value:function(e){var t=this;e.preventDefault(),m.a.get("/api/join/"+this.state.partyCode,{withCredentials:!0}).then((function(e){200===e.status?(console.log(e.data),t.context.setUsername(e.data)):204===e.status&&t.setState({error:!0})})).catch((function(e){console.log(e),401===e.response.status&&t.setState({redirectTo:"/login"})}))}},{key:"onChangePartyCode",value:function(e){this.setState({partyCode:e.target.value})}},{key:"onCreateParty",value:function(e){var t=this;e.preventDefault(),m.a.get("/api/create",{withCredentials:!0}).then((function(e){200===e.status&&(t.context.setPartyCode(e.data),t.context.setIsAdmin(!0))})).catch((function(e){console.log(e),401===e.response.status&&t.setState({redirectTo:"/login"})}))}},{key:"render",value:function(){return this.state.redirectTo?Object(s.jsx)(d.a,{to:{pathname:this.state.redirectTo}}):Object(s.jsxs)("div",{className:"text-center",children:[this.state.error&&Object(s.jsxs)("div",{className:"alert alert-danger",role:"alert",children:["Cannot find party with code ",Object(s.jsx)("b",{children:this.state.partyCode}),"."]}),Object(s.jsxs)("form",{className:"form-inline justify-content-center mb-3",onSubmit:this.onJoinParty,children:[Object(s.jsx)("div",{className:"form-group mx-sm-3",children:Object(s.jsx)("input",{type:"text",className:"form-control",value:this.state.partyCode,onChange:this.onChangePartyCode,id:"partyCode",placeholder:"Party Code"})}),Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("input",{type:"submit",value:"Join Party",className:"btn btn-primary",disabled:0===this.state.partyCode.length})})]}),Object(s.jsx)("form",{onSubmit:this.onCreateParty,children:Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("input",{type:"submit",value:"Create Party",className:"btn btn-primary"})})})]})}}]),a}(n.Component);function k(){return Object(n.useContext)(p).partyCode?Object(s.jsx)(S,{}):Object(s.jsx)(w,{})}w.contextType=p;var T=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;m.a.get("/api/login",{withCredentials:!0}).then((function(t){console.log(t.data),200===t.status&&(e.context.setIsAuth(!0),e.context.setUsername(t.data.username),e.context.setPartyCode(t.data.partyCode))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(s.jsx)(j.a,{children:Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)(g,{}),Object(s.jsx)("br",{}),Object(s.jsx)(d.b,{path:"/",exact:!0,component:k}),Object(s.jsx)(d.b,{path:"/login",component:N}),Object(s.jsx)(d.b,{path:"/register",component:P})]})})}}]),a}(n.Component);T.contextType=p;var A=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,66)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),r(e),c(e)}))};i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(v,{children:Object(s.jsx)(T,{})})}),document.getElementById("root")),A()}},[[65,1,2]]]);
//# sourceMappingURL=main.ec150d93.chunk.js.map