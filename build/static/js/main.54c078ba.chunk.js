(this.webpackJsonpassassins=this.webpackJsonpassassins||[]).push([[0],{60:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s(1),r=s.n(n),i=s(30),o=s.n(i),c=s(10),u=s(11),l=s(3),h=s(14),d=s(13),b=(s(37),s(12)),j=s(2),m=s(8),p=s.n(m),g=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).onLogout=a.onLogout.bind(Object(l.a)(a)),a}return Object(u.a)(s,[{key:"onLogout",value:function(e){var t=this;e.preventDefault(),p.a.get("/api/logout",{withCredentials:!0}).then((function(e){console.log(e),200===e.status&&t.props.setUser({isAuthenticated:!1,username:null})}))}},{key:"render",value:function(){return Object(a.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(a.jsx)(b.b,{to:"/",className:"navbar-brand",children:"Assassins"}),Object(a.jsx)("div",{className:"collpase navbar-collapse",children:Object(a.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(a.jsx)("li",{className:"navbar-item",children:this.props.isAuthenticated?Object(a.jsx)(b.b,{to:"/",className:"nav-link",onClick:this.onLogout,children:"Logout"}):Object(a.jsx)(b.b,{to:"/login",className:"nav-link",children:"Login"})}),!this.props.isAuthenticated&&Object(a.jsx)("li",{className:"navbar-item",children:Object(a.jsx)(b.b,{to:"/register",className:"nav-link",children:"Register"})})]})})]})}}]),s}(n.Component),v=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).onChangeUsername=a.onChangeUsername.bind(Object(l.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(l.a)(a)),a.onSubmit=a.onSubmit.bind(Object(l.a)(a)),a.state={username:"",password:""},a}return Object(u.a)(s,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var s={username:this.state.username,password:this.state.password};console.log(s),p.a.post("/api/login",s,{withCredentials:!0}).then((function(e){console.log(e),200===e.status&&(t.props.setUser({isAuthenticated:!0,username:e.data.username}),t.setState({redirectTo:"/"}))}))}},{key:"canSubmit",value:function(){return this.state.username.length>0&&this.state.password.length>0}},{key:"render",value:function(){return this.state.redirectTo?Object(a.jsx)(j.a,{to:{pathname:this.state.redirectTo}}):Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Login"}),Object(a.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Username: "}),Object(a.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.username,onChange:this.onChangeUsername})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Password: "}),Object(a.jsx)("input",{type:"password",className:"form-control",value:this.state.password,onChange:this.onChangePassword})]}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"submit",value:"Login",className:"btn btn-primary",disabled:!this.canSubmit()})})]})]})}}]),s}(n.Component),O=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).onChangeUsername=a.onChangeUsername.bind(Object(l.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(l.a)(a)),a.onChangeConfirmPassword=a.onChangeConfirmPassword.bind(Object(l.a)(a)),a.canSubmit=a.canSubmit.bind(Object(l.a)(a)),a.onSubmit=a.onSubmit.bind(Object(l.a)(a)),a.state={username:"",password:"",confirmPassword:""},a}return Object(u.a)(s,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onChangeConfirmPassword",value:function(e){this.setState({confirmPassword:e.target.value})}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var s={username:this.state.username,password:this.state.password};console.log(s),p.a.post("/api/register",s,{withCredentials:!0}).then((function(e){200===e.status&&t.setState({redirectTo:"/login"})}))}},{key:"canSubmit",value:function(){return this.state.username.length>0&&this.state.password.length>0&&this.state.password===this.state.confirmPassword}},{key:"render",value:function(){return this.state.redirectTo?Object(a.jsx)(j.a,{to:{pathname:this.state.redirectTo}}):Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Register"}),Object(a.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Username: "}),Object(a.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.username,onChange:this.onChangeUsername})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Password: "}),Object(a.jsx)("input",{type:"password",className:"form-control",value:this.state.password,onChange:this.onChangePassword})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Confirm Password: "}),Object(a.jsx)("input",{type:"password",className:"form-control",value:this.state.confirmPassword,onChange:this.onChangeConfirmPassword})]}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"submit",value:"Register",disabled:!this.canSubmit(),className:"btn btn-primary"})})]})]})}}]),s}(n.Component),f=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).onJoinParty=a.onJoinParty.bind(Object(l.a)(a)),a.onChangePartyCode=a.onChangePartyCode.bind(Object(l.a)(a)),a.onCreateParty=a.onCreateParty.bind(Object(l.a)(a)),a.state={partyCode:""},a}return Object(u.a)(s,[{key:"onJoinParty",value:function(e){var t=this;e.preventDefault(),p.a.get("/api/party/"+this.state.partyCode,{withCredentials:!0}).then((function(e){200===e.status?console.log(e.data):401===e.status&&t.setState({redirectTo:"/login"})}))}},{key:"onChangePartyCode",value:function(e){this.setState({partyCode:e.target.value})}},{key:"onCreateParty",value:function(e){var t=this;e.preventDefault(),p.a.get("/api/create",{withCredentials:!0}).then((function(e){200===e.status?console.log(e.data):401===e.status&&t.setState({redirectTo:"/login"})}))}},{key:"render",value:function(){return this.props.isAuthenticated||this.setState({redirectTo:"/login"}),this.state.redirectTo?Object(a.jsx)(j.a,{to:{pathname:this.state.redirectTo}}):Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsxs)("form",{className:"form-inline justify-content-center mb-3",onSubmit:this.onJoinParty,children:[Object(a.jsx)("div",{className:"form-group mx-sm-3",children:Object(a.jsx)("input",{type:"text",className:"form-control",value:this.state.partyCode,onChange:this.onChangePartyCode,id:"partyCode",placeholder:"Party Code"})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"submit",value:"Join Party",className:"btn btn-primary",disabled:0===this.state.partyCode.length})})]}),Object(a.jsx)("form",{onSubmit:this.onCreateParty,children:Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"submit",value:"Create Party",className:"btn btn-primary"})})}),Object(a.jsx)("br",{})]})}}]),s}(n.Component),C=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={isAuthenticated:!1,username:null},a.getUser=a.getUser.bind(Object(l.a)(a)),a.setUser=a.setUser.bind(Object(l.a)(a)),a}return Object(u.a)(s,[{key:"getUser",value:function(){var e=this;p.a.get("/api/login",{withCredentials:!0}).then((function(t){console.log(t.data),200===t.status&&e.setState({isAuthenticated:!0,username:t.data.username})}))}},{key:"setUser",value:function(e){this.setState(e)}},{key:"componentDidMount",value:function(){var e=this;this.getUser(),p.a.interceptors.response.use((function(e){return e}),(function(t){return 401===t.response.status&&e.setState({isAuthenticated:!1}),Promise.reject(t)}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)(b.a,{children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(g,{isAuthenticated:this.state.isAuthenticated,setUser:this.setUser}),Object(a.jsx)("br",{}),Object(a.jsx)(j.b,{path:"/",exact:!0,render:function(){return Object(a.jsx)(f,{isAuthenticated:e.state.isAuthenticated})}}),Object(a.jsx)(j.b,{path:"/login",render:function(){return Object(a.jsx)(v,{setUser:e.setUser})}}),Object(a.jsx)(j.b,{path:"/register",component:O})]})})}}]),s}(n.Component),x=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,61)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;s(e),a(e),n(e),r(e),i(e)}))};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(C,{})}),document.getElementById("root")),x()}},[[60,1,2]]]);
//# sourceMappingURL=main.54c078ba.chunk.js.map