(this.webpackJsonpassassins=this.webpackJsonpassassins||[]).push([[0],{89:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a(0),r=a.n(n),c=a(31),i=a.n(c),o=a(53),l=a(18),j=a(19),d=a(22),h=a(21),b=(a(61),a(7)),u=a(6),O=a(8),m=a.n(O),p=a(28),x=a(10),g=Object(n.createContext)(),y=function(e){var t=e.children,a=Object(n.useState)(""),r=Object(x.a)(a,2),c=r[0],i=r[1],o=Object(n.useState)(""),l=Object(x.a)(o,2),j=l[0],d=l[1],h=Object(n.useState)(""),b=Object(x.a)(h,2),u=b[0],O=b[1],m=Object(n.useState)(!1),p=Object(x.a)(m,2),y=p[0],f=p[1],v=Object(n.useState)(!1),C=Object(x.a)(v,2),w=C[0],S=C[1],N=Object(n.useState)(!0),P=Object(x.a)(N,2),k=P[0],A=P[1];return Object(s.jsx)(g.Provider,{value:{username:c,setUsername:i,partyCode:j,setPartyCode:d,target:u,setTarget:O,isAdmin:y,setIsAdmin:f,isAuth:w,setIsAuth:S,isAlive:k,setIsAlive:A},children:t})},f=a(25),v=a(24);function C(){var e=Object(n.useContext)(g);return Object(s.jsx)(v.a.Link,{as:b.b,to:"/login",onClick:function(){m.a.get("/api/logout",{withCredentials:!0}).then((function(t){console.log(t),200===t.status&&(e.setIsAuth(!1),e.setUsername(""),e.setPartyCode(""),e.setIsAdmin(!1))}))},children:"Logout"})}function w(){var e=Object(n.useContext)(g);return Object(s.jsx)(f.a,{collapseOnSelect:!0,expand:"sm",bg:"dark",variant:"dark",sticky:"top",children:Object(s.jsxs)(p.a,{children:[Object(s.jsx)(f.a.Brand,{as:b.b,to:"/",children:"Assassins"}),Object(s.jsx)(f.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(s.jsx)(f.a.Collapse,{id:"responsive-navbar-nav",children:Object(s.jsxs)(v.a,{className:"mr-auto",children:[e.isAuth?Object(s.jsxs)(r.a.Fragment,{children:[Object(s.jsx)(C,{}),Object(s.jsx)(v.a.Link,{as:b.b,to:"/user/"+e.username,children:"Profile"})]}):Object(s.jsxs)(r.a.Fragment,{children:[Object(s.jsx)(v.a.Link,{as:b.b,to:"/login",children:"Login"}),Object(s.jsx)(v.a.Link,{as:b.b,to:"/register",children:"Register"})]}),Object(s.jsx)(v.a.Link,{as:b.b,to:"/help",children:"Help"})]})})]})})}function S(){return Object(s.jsx)(f.a,{expand:"sm",bg:"dark",variant:"dark",fixed:"bottom",children:Object(s.jsx)(p.a,{children:Object(s.jsxs)(f.a.Text,{children:["Created by ",Object(s.jsx)("a",{href:"https://github.com/minhd-vu/",children:"Minh Vu"}),". Project on ",Object(s.jsx)("a",{href:"https://github.com/minhd-vu/assassins",children:"GitHub"}),"."]})})})}var N=a(27),P=a(13),k=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).onChange=s.onChange.bind(Object(P.a)(s)),s.onSubmit=s.onSubmit.bind(Object(P.a)(s)),s.state={username:"",password:"",error:!1},s}return Object(j.a)(a,[{key:"onChange",value:function(e){var t=e.target,a=t.name,s=t.value;this.setState(Object(N.a)({},a,s))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={username:this.state.username,password:this.state.password};console.log(a),m.a.post("/api/login",a,{withCredentials:!0}).then((function(e){console.log(e),200===e.status&&(t.context.setIsAuth(!0),t.context.setUsername(e.data.username),t.context.setPartyCode(e.data.partyCode),t.context.setIsAdmin(e.data.isAdmin),t.setState({redirectTo:"/"}))})).catch((function(e){console.log(e),401===e.response.status&&t.setState({error:!0})}))}},{key:"canSubmit",value:function(){return this.state.username.length>0&&this.state.password.length>0}},{key:"render",value:function(){return this.state.redirectTo?Object(s.jsx)(u.a,{to:{pathname:this.state.redirectTo}}):Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Login"}),this.state.error&&Object(s.jsx)("div",{className:"alert alert-danger",role:"alert",children:"Invalid username and/or password."}),Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Username: "}),Object(s.jsx)("input",{type:"text",required:!0,name:"username",className:"form-control",value:this.state.username,onChange:this.onChange})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Password: "}),Object(s.jsx)("input",{type:"password",name:"password",className:"form-control",value:this.state.password,onChange:this.onChange})]}),Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("input",{type:"submit",value:"Login",className:"btn btn-primary",disabled:!this.canSubmit()})})]})]})}}]),a}(n.Component);k.contextType=g;var A=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).onChange=s.onChange.bind(Object(P.a)(s)),s.canSubmit=s.canSubmit.bind(Object(P.a)(s)),s.onSubmit=s.onSubmit.bind(Object(P.a)(s)),s.state={username:"",password:"",confirmPassword:"",error:!1},s}return Object(j.a)(a,[{key:"onChange",value:function(e){var t=e.target,a=t.name,s=t.value;this.setState(Object(N.a)({},a,s))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={username:this.state.username,password:this.state.password};console.log(a),m.a.post("/api/register",a,{withCredentials:!0}).then((function(e){200===e.status&&(t.context.setUsername(a.username),t.context.setIsAuth(!0),t.setState({redirectTo:"/"}))})).catch((function(e){console.log(e),401===e.response.status&&t.setState({error:!0})}))}},{key:"canSubmit",value:function(){return this.state.username.length>0&&this.state.password.length>0&&this.state.password===this.state.confirmPassword}},{key:"render",value:function(){return this.state.redirectTo?Object(s.jsx)(u.a,{to:{pathname:this.state.redirectTo}}):Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Register"}),this.state.error&&Object(s.jsx)("div",{className:"alert alert-danger",role:"alert",children:"Username is already in use."}),Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Username: "}),Object(s.jsx)("input",{type:"text",name:"username",required:!0,className:"form-control",value:this.state.username,onChange:this.onChange})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Password: "}),Object(s.jsx)("input",{type:"password",name:"password",className:"form-control",value:this.state.password,onChange:this.onChange})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Confirm Password: "}),Object(s.jsx)("input",{type:"password",name:"confirmPassword",className:"form-control",value:this.state.confirmPassword,onChange:this.onChange})]}),Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("input",{type:"submit",value:"Register",disabled:!this.canSubmit(),className:"btn btn-primary"})})]})]})}}]),a}(n.Component);A.contextType=g;var T=a(33),I=a(37);function L(){var e=Object(n.useContext)(g),t=Object(n.useState)(""),a=Object(x.a)(t,2),r=a[0],c=(a[1],Object(n.useState)({})),i=Object(x.a)(c,2),o=i[0],l=i[1],j=Object(n.useState)([]),d=Object(x.a)(j,2),h=d[0],b=d[1],O=Object(n.useState)("Classic"),p=Object(x.a)(O,2),y=p[0],f=p[1],v=Object(n.useState)(""),C=Object(x.a)(v,2),w=C[0],S=C[1];return Object(n.useEffect)((function(){var e=setInterval((function(){m.a.get("/api/party",{withCredentials:!0}).then((function(e){200===e.status&&(l(e.data),e.data&&e.data.players&&b(e.data.players.map((function(e){return Object(s.jsx)("div",{className:"p-2",children:Object(s.jsx)("button",{type:"button",className:"btn btn-light",children:e.username})},e.username)}))))})).catch((function(e){console.log(e)}))}),1e3);return function(){return clearInterval(e)}}),[]),r?Object(s.jsx)(u.a,{to:{pathname:r}}):Object(s.jsxs)("div",{className:"text-center",children:[w&&Object(s.jsx)("div",{className:"alert alert-danger",role:"alert",children:w}),Object(s.jsxs)("h4",{children:["Party Code: ",Object(s.jsx)("b",{children:e.partyCode})]}),Object(s.jsx)("br",{}),Object(s.jsx)("h6",{children:"Players: "}),Object(s.jsx)("div",{className:"d-flex flex-wrap justify-content-center",children:h}),Object(s.jsx)("br",{}),!o.isStarted&&e.isAdmin&&Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m.a.post("/api/start",{gameMode:y},{withCredentials:!0}).then((function(e){console.log(e),e.status})).catch((function(e){console.log(e),S(e.response.data)}))},children:[Object(s.jsx)(T.a.Group,{children:Object(s.jsxs)(T.a.Row,{children:[Object(s.jsx)(T.a.Label,{column:!0,sm:4,children:"Game Mode:"}),Object(s.jsx)(I.a,{sm:8,children:Object(s.jsxs)(T.a.Control,{as:"select",defaultValue:y,onChange:function(e){return f(e.target.value)},children:[Object(s.jsx)("option",{children:"Classic"}),Object(s.jsx)("option",{children:"Shuffle"})]})})]})}),Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("input",{type:"submit",value:"Start Party",className:"btn btn-primary"})})]}),Object(s.jsx)("form",{onSubmit:function(t){t.preventDefault(),m.a.get("/api/leave",{withCredentials:!0}).then((function(t){console.log(t),200===t.status&&(e.setPartyCode(""),e.setIsAdmin(!1))})).catch((function(e){console.log(e)}))},children:Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("input",{type:"submit",value:"Leave Party",className:"btn btn-primary"})})})]})}var D=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).onJoinParty=s.onJoinParty.bind(Object(P.a)(s)),s.onChangePartyCode=s.onChangePartyCode.bind(Object(P.a)(s)),s.onCreateParty=s.onCreateParty.bind(Object(P.a)(s)),s.state={partyCode:"",error:""},s}return Object(j.a)(a,[{key:"onJoinParty",value:function(e){var t=this;e.preventDefault(),m.a.get("/api/join/"+this.state.partyCode,{withCredentials:!0}).then((function(e){200===e.status&&(console.log(e.data),t.context.setUsername(e.data))})).catch((function(e){console.log(e),401===e.response.status?t.setState({redirectTo:"/login"}):t.setState({error:e.response.data})}))}},{key:"onChangePartyCode",value:function(e){this.setState({partyCode:e.target.value})}},{key:"onCreateParty",value:function(e){var t=this;e.preventDefault(),m.a.get("/api/create",{withCredentials:!0}).then((function(e){200===e.status&&(t.context.setPartyCode(e.data),t.context.setIsAdmin(!0))})).catch((function(e){console.log(e),401===e.response.status&&t.setState({redirectTo:"/login"})}))}},{key:"render",value:function(){return this.state.redirectTo?Object(s.jsx)(u.a,{to:{pathname:this.state.redirectTo}}):Object(s.jsxs)("div",{className:"text-center",children:[this.state.error&&Object(s.jsx)("div",{className:"alert alert-danger",role:"alert",children:this.state.error}),Object(s.jsxs)("form",{onSubmit:this.onJoinParty,children:[Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("input",{type:"text",className:"form-control",value:this.state.partyCode,onChange:this.onChangePartyCode,id:"partyCode",placeholder:"Party Code"})}),Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("input",{type:"submit",value:"Join Party",className:"btn btn-primary",disabled:0===this.state.partyCode.length})})]}),Object(s.jsx)("form",{onSubmit:this.onCreateParty,children:Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("input",{type:"submit",value:"Create Party",className:"btn btn-primary"})})})]})}}]),a}(n.Component);function U(){return Object(n.useContext)(g).partyCode?Object(s.jsx)(L,{}):Object(s.jsx)(D,{})}function J(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"How to Play"}),Object(s.jsx)("p",{children:"Assassins is a game that can be played almost anywhere, but best done in semi-crowded environments. The goal of the game is to be the last remaining person alive and to assassinate whomever you are assigned."}),Object(s.jsx)("h4",{children:"Create a User"}),Object(s.jsxs)("p",{children:["Before doing anything, you should create a user. It will keep track of your statistics as well as identifying who you are in a party. You can register yourself by heading to the ",Object(s.jsx)(b.b,{to:"/register",children:"register"})," link in the navbar. Once you create a user, you will no longer be able to change the username or password."]}),Object(s.jsxs)("p",{children:["If you already have a user, you can login by heading to the ",Object(s.jsx)(b.b,{to:"/login",children:"login"})," link in the navbar."]}),Object(s.jsx)("h4",{children:"Party System"}),Object(s.jsx)("p",{children:"Once you have logged in you have the option of joining or creating a party. A party is an instance of the assassins game; it is how you connect with your friends."}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsxs)("div",{className:"col-sm",children:[Object(s.jsx)("h5",{children:"Join a Party"}),Object(s.jsxs)("p",{children:["To join a party, type in the party code in the input field on the ",Object(s.jsx)(b.b,{to:"/",children:"home page"})," then click the ",Object(s.jsx)("strong",{children:"Join Party"})," button. Once a party has started you can no longer join it."]})]}),Object(s.jsxs)("div",{className:"col-sm",children:[Object(s.jsx)("h5",{children:"Create a Party"}),Object(s.jsxs)("p",{children:["To create a party, click the ",Object(s.jsx)("strong",{children:"Create Party"})," button on the ",Object(s.jsx)(b.b,{to:"/",children:"home page"}),". Once you have created it, the app will display the party code in ",Object(s.jsx)("strong",{children:"bold"}),". Give this code to your friends so that they can join."]})]})]}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsxs)("div",{className:"col-sm",children:[Object(s.jsx)("h5",{children:"Leave a Party"}),Object(s.jsx)("p",{children:"Once you join a party, you have the option of leaving it. You can leave it anytime, and the app will handle the reshuffling of players."})]}),Object(s.jsxs)("div",{className:"col-sm",children:[Object(s.jsx)("h5",{children:"Start a Party"}),Object(s.jsx)("p",{children:"Only the party leader can start the party. Once started everyone is assigned a target."})]})]}),Object(s.jsx)("h4",{children:"Eliminate Targets"}),Object(s.jsxs)("p",{children:["You will be assigned a target to assassinate, hence the name ",Object(s.jsx)("i",{children:"assassins"}),". Once you assassinated your target, either by means of dart blasters, tag, projectile launchers, or any other method, click the ",Object(s.jsx)("b",{children:"Assassinate"})," button."]}),Object(s.jsx)("p",{children:"A notification will be send to the target just eliminated, the target will have option of confirming or denying the assassination attempt. If the attempt is denied, the game continues; this is inplace to prevent accidental misclicks. If the attempt is successful, you will be assigned a new target depending on the game mode."}),Object(s.jsx)("h4",{children:"Game Modes"}),Object(s.jsxs)("dl",{className:"row",children:[Object(s.jsx)("dt",{className:"col-sm-3",children:"Classic"}),Object(s.jsx)("dd",{className:"col-sm-9",children:"When you assassinate a target, your next target will be the target your target had. If you recieve yourself as a target, you have the ability to assassinate anyone."}),Object(s.jsx)("dt",{className:"col-sm-3",children:"Shuffle"}),Object(s.jsx)("dd",{className:"col-sm-9",children:Object(s.jsx)("p",{children:"When a player assassinates a target, all players will recieve a new target from the remaining players alive."})})]})]})}D.contextType=g;var F=a(55);function M(e){var t=e.match.params.username,a=Object(n.useState)(0),r=Object(x.a)(a,2),c=r[0],i=r[1],o=Object(n.useState)(0),l=Object(x.a)(o,2),j=l[0],d=l[1],h=Object(n.useState)(!1),b=Object(x.a)(h,2),u=b[0],O=b[1];return Object(n.useEffect)((function(){m.a.get("/api/user/"+t,{withCredentials:!0}).then((function(e){200===e.status?(console.log(e.data),i(e.data.elims),d(e.data.deaths),O(!1)):204===e.status&&O(!0)})).catch((function(e){console.log(e)}))})),u?Object(s.jsxs)(F.a,{variant:"danger",children:["No user found with username ",Object(s.jsx)("b",{children:t}),"."]},"danger"):Object(s.jsxs)("table",{className:"table",children:[Object(s.jsx)("thead",{className:"thead-light",children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{scope:"col",children:"Name"}),Object(s.jsx)("th",{scope:"col",children:"Kills"}),Object(s.jsx)("th",{scope:"col",children:"Deaths"}),Object(s.jsx)("th",{scope:"col",children:"K/D"})]})}),Object(s.jsx)("tbody",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:t}),Object(s.jsx)("td",{children:c}),Object(s.jsx)("td",{children:j}),Object(s.jsx)("td",{children:(c/j).toFixed(2)})]})})]})}var G=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this;m.a.get("/api/login",{withCredentials:!0}).then((function(t){console.log(t.data),200===t.status&&(e.context.setIsAuth(!0),e.context.setUsername(t.data.username),e.context.setPartyCode(t.data.partyCode),e.context.setIsAdmin(t.data.isAdmin))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(s.jsxs)(b.a,{children:[Object(s.jsx)(w,{}),Object(s.jsx)("br",{}),Object(s.jsxs)(p.a,{children:[Object(s.jsx)(u.b,{path:"/",exact:!0,component:U}),Object(s.jsx)(u.b,{path:"/login",component:k}),Object(s.jsx)(u.b,{path:"/register",component:A}),Object(s.jsx)(u.b,{path:"/user/:username",render:function(e){return Object(s.jsx)(M,Object(o.a)({},e))}}),Object(s.jsx)(u.b,{path:"/help",component:J})]}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)(S,{})]})}}]),a}(n.Component);G.contextType=g;var B=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,91)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),r(e),c(e)}))};i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(y,{children:Object(s.jsx)(G,{})})}),document.getElementById("root")),B()}},[[89,1,2]]]);
//# sourceMappingURL=main.e6566cd0.chunk.js.map