(this.webpackJsonpassassins=this.webpackJsonpassassins||[]).push([[0],{87:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(0),r=a.n(s),c=a(28),i=a.n(c),o=a(48),l=a(15),j=a(16),h=a(18),d=a(17),b=(a(57),a(7)),u=a(5),m=a(11),O=a.n(m),p=a(50),y=a(13),x=Object(s.createContext)(),g=function(e){var t=e.children,a=Object(s.useState)(""),r=Object(y.a)(a,2),c=r[0],i=r[1],o=Object(s.useState)(""),l=Object(y.a)(o,2),j=l[0],h=l[1],d=Object(s.useState)(""),b=Object(y.a)(d,2),u=b[0],m=b[1],O=Object(s.useState)(!1),p=Object(y.a)(O,2),g=p[0],v=p[1],f=Object(s.useState)(!1),C=Object(y.a)(f,2),S=C[0],w=C[1],P=Object(s.useState)(!0),k=Object(y.a)(P,2),N=k[0],T=k[1];return Object(n.jsx)(x.Provider,{value:{username:c,setUsername:i,partyCode:j,setPartyCode:h,target:u,setTarget:m,isAdmin:g,setIsAdmin:v,isAuth:S,setIsAuth:w,isAlive:N,setIsAlive:T},children:t})},v=a(31),f=a(24);function C(){var e=Object(s.useContext)(x);return Object(n.jsxs)(v.a,{collapseOnSelect:!0,expand:"sm",bg:"dark",variant:"dark",sticky:"top",children:[Object(n.jsx)(v.a.Brand,{as:b.b,to:"/",children:"Assassins"}),Object(n.jsx)(v.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(n.jsx)(v.a.Collapse,{id:"responsive-navbar-nav",children:Object(n.jsxs)(f.a,{className:"mr-auto",children:[e.isAuth?Object(n.jsxs)(r.a.Fragment,{children:[Object(n.jsx)(f.a.Link,{as:b.b,to:"/login",onClick:function(){O.a.get("/api/logout",{withCredentials:!0}).then((function(t){console.log(t),200===t.status&&(e.setIsAuth(!1),e.setUsername(""),e.setPartyCode(""))}))},children:"Logout"}),Object(n.jsx)(f.a.Link,{as:b.b,to:"/user/"+e.username,children:"Profile"})]}):Object(n.jsxs)(r.a.Fragment,{children:[Object(n.jsx)(f.a.Link,{as:b.b,to:"/login",children:"Login"}),Object(n.jsx)(f.a.Link,{as:b.b,to:"/register",children:"Register"})]}),Object(n.jsx)(f.a.Link,{as:b.b,to:"/help",children:"Help"}),Object(n.jsx)(f.a.Link,{as:b.b,to:"/about",children:"About"})]})})]})}var S=a(25),w=a(9),P=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onChange=n.onChange.bind(Object(w.a)(n)),n.onSubmit=n.onSubmit.bind(Object(w.a)(n)),n.state={username:"",password:"",error:!1},n}return Object(j.a)(a,[{key:"onChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(S.a)({},a,n))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={username:this.state.username,password:this.state.password};console.log(a),O.a.post("/api/login",a,{withCredentials:!0}).then((function(e){console.log(e),200===e.status&&(t.context.setIsAuth(!0),t.context.setUsername(e.data.username),t.context.setPartyCode(e.data.partyCode),t.context.setIsAdmin(e.data.isAdmin),t.setState({redirectTo:"/"}))})).catch((function(e){console.log(e),401===e.response.status&&t.setState({error:!0})}))}},{key:"canSubmit",value:function(){return this.state.username.length>0&&this.state.password.length>0}},{key:"render",value:function(){return this.state.redirectTo?Object(n.jsx)(u.a,{to:{pathname:this.state.redirectTo}}):Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"Login"}),this.state.error&&Object(n.jsx)("div",{className:"alert alert-danger",role:"alert",children:"Invalid username and/or password."}),Object(n.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Username: "}),Object(n.jsx)("input",{type:"text",required:!0,name:"username",className:"form-control",value:this.state.username,onChange:this.onChange})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Password: "}),Object(n.jsx)("input",{type:"password",name:"password",className:"form-control",value:this.state.password,onChange:this.onChange})]}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("input",{type:"submit",value:"Login",className:"btn btn-primary",disabled:!this.canSubmit()})})]})]})}}]),a}(s.Component);P.contextType=x;var k=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onChange=n.onChange.bind(Object(w.a)(n)),n.canSubmit=n.canSubmit.bind(Object(w.a)(n)),n.onSubmit=n.onSubmit.bind(Object(w.a)(n)),n.state={username:"",password:"",confirmPassword:"",error:!1},n}return Object(j.a)(a,[{key:"onChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(S.a)({},a,n))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={username:this.state.username,password:this.state.password};console.log(a),O.a.post("/api/register",a,{withCredentials:!0}).then((function(e){200===e.status&&(t.context.setUsername(a.username),t.context.setIsAuth(!0),t.setState({redirectTo:"/"}))})).catch((function(e){console.log(e),401===e.response.status&&t.setState({error:!0})}))}},{key:"canSubmit",value:function(){return this.state.username.length>0&&this.state.password.length>0&&this.state.password===this.state.confirmPassword}},{key:"render",value:function(){return this.state.redirectTo?Object(n.jsx)(u.a,{to:{pathname:this.state.redirectTo}}):Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"Register"}),this.state.error&&Object(n.jsx)("div",{className:"alert alert-danger",role:"alert",children:"Username is already in use."}),Object(n.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Username: "}),Object(n.jsx)("input",{type:"text",name:"username",required:!0,className:"form-control",value:this.state.username,onChange:this.onChange})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Password: "}),Object(n.jsx)("input",{type:"password",name:"password",className:"form-control",value:this.state.password,onChange:this.onChange})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{children:"Confirm Password: "}),Object(n.jsx)("input",{type:"password",name:"confirmPassword",className:"form-control",value:this.state.confirmPassword,onChange:this.onChange})]}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("input",{type:"submit",value:"Register",disabled:!this.canSubmit(),className:"btn btn-primary"})})]})]})}}]),a}(s.Component);k.contextType=x;var N=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onLeaveParty=n.onLeaveParty.bind(Object(w.a)(n)),n.onStartParty=n.onStartParty.bind(Object(w.a)(n)),n.state={},n}return Object(j.a)(a,[{key:"onStartParty",value:function(e){e.preventDefault()}},{key:"onLeaveParty",value:function(e){e.preventDefault(),this.context.setPartyCode("")}},{key:"render",value:function(){return this.state.redirectTo?Object(n.jsx)(u.a,{to:{pathname:this.state.redirectTo}}):Object(n.jsxs)("div",{className:"text-center",children:[Object(n.jsxs)("h4",{children:["Party Code: ",Object(n.jsx)("b",{children:this.context.partyCode})]}),Object(n.jsx)("label",{className:"col-sm-2 col-form-label",children:"Target"}),this.context.isAdmin&&Object(n.jsx)("form",{onSubmit:this.onStartParty,children:Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("input",{type:"submit",value:"Start Party",className:"btn btn-primary"})})}),Object(n.jsx)("form",{onSubmit:this.onLeaveParty,children:Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("input",{type:"submit",value:"Leave Party",className:"btn btn-primary"})})})]})}}]),a}(s.Component);N.contextType=x;var T=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onJoinParty=n.onJoinParty.bind(Object(w.a)(n)),n.onChangePartyCode=n.onChangePartyCode.bind(Object(w.a)(n)),n.onCreateParty=n.onCreateParty.bind(Object(w.a)(n)),n.state={partyCode:"",error:!1},n}return Object(j.a)(a,[{key:"onJoinParty",value:function(e){var t=this;e.preventDefault(),O.a.get("/api/join/"+this.state.partyCode,{withCredentials:!0}).then((function(e){200===e.status?(console.log(e.data),t.context.setUsername(e.data)):204===e.status&&t.setState({error:!0})})).catch((function(e){console.log(e),401===e.response.status&&t.setState({redirectTo:"/login"})}))}},{key:"onChangePartyCode",value:function(e){this.setState({partyCode:e.target.value})}},{key:"onCreateParty",value:function(e){var t=this;e.preventDefault(),O.a.get("/api/create",{withCredentials:!0}).then((function(e){200===e.status&&(t.context.setPartyCode(e.data),t.context.setIsAdmin(!0))})).catch((function(e){console.log(e),401===e.response.status&&t.setState({redirectTo:"/login"})}))}},{key:"render",value:function(){return this.state.redirectTo?Object(n.jsx)(u.a,{to:{pathname:this.state.redirectTo}}):Object(n.jsxs)("div",{className:"text-center",children:[this.state.error&&Object(n.jsxs)("div",{className:"alert alert-danger",role:"alert",children:["Cannot find party with code ",Object(n.jsx)("b",{children:this.state.partyCode}),"."]}),Object(n.jsxs)("form",{className:"form-inline justify-content-center mb-3",onSubmit:this.onJoinParty,children:[Object(n.jsx)("div",{className:"form-group mx-sm-3",children:Object(n.jsx)("input",{type:"text",className:"form-control",value:this.state.partyCode,onChange:this.onChangePartyCode,id:"partyCode",placeholder:"Party Code"})}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("input",{type:"submit",value:"Join Party",className:"btn btn-primary",disabled:0===this.state.partyCode.length})})]}),Object(n.jsx)("form",{onSubmit:this.onCreateParty,children:Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("input",{type:"submit",value:"Create Party",className:"btn btn-primary"})})})]})}}]),a}(s.Component);function A(){return Object(s.useContext)(x).partyCode?Object(n.jsx)(N,{}):Object(n.jsx)(T,{})}function L(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{children:"Assassins Party Game is created by Minh Vu."}),Object(n.jsxs)("p",{children:["Source code and documentation can be found on ",Object(n.jsx)("a",{href:"https://github.com/minhd-vu/assassins",children:"GitHub"})]})]})}function D(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{id:"how-to-play",children:"How to Play"}),Object(n.jsx)("p",{children:"Assassins is a game that can be played almost anywhere, but best done in semi-crowded environments. The goal of the game is to be the last remaining person alive and to assassinate whomever you are assigned."}),Object(n.jsx)("h4",{id:"create-a-user",children:"Create a User"}),Object(n.jsxs)("p",{children:["Before doing anything, you should create a user. It will keep track of your statistics as well as identifying who you are in a party. You can register yourself by heading to the ",Object(n.jsx)(b.b,{to:"/register",children:"register"})," link in the navbar. Once you create a user, you will no longer be able to change the username or password."]}),Object(n.jsxs)("p",{children:["If you already have a user, you can login by heading to the ",Object(n.jsx)(b.b,{to:"/login",children:"login"})," link in the navbar."]}),Object(n.jsx)("h4",{id:"party-system",children:"Party System"}),Object(n.jsx)("p",{children:"Once you have logged in you have the option of joining or creating a party. A party is an instance of the assassins game; it is how you connect with your friends."}),Object(n.jsx)("h5",{id:"create-a-party",children:"Create a Party"}),Object(n.jsxs)("p",{children:["To create a party, click the ",Object(n.jsx)("strong",{children:"Create Party"})," button on the ",Object(n.jsx)(b.b,{to:"/",children:"home page"}),". Once you have created it, the app will display the party code in ",Object(n.jsx)("strong",{children:"bold"}),". Give this code to your friends so that you they can join. When you create a party, you are given administrative rights. You are given the ability to kick players from the party and to start the party."]}),Object(n.jsx)("h5",{id:"join-a-party",children:"Join a Party"}),Object(n.jsxs)("p",{children:["To join a party, type in the party code in the input field on the ",Object(n.jsx)(b.b,{to:"/",children:"home page"})," then click the ",Object(n.jsx)("strong",{children:"Join Party"})," button. Once a party has started you can no longer join it."]}),Object(n.jsx)("h5",{id:"leave-a-party",children:"Leave a Party"}),Object(n.jsx)("p",{children:"Once you join a party, you have the option of leaving it. You can leave it anytime, and the app will handle the reshuffling of players."})]})}T.contextType=x;var I=a(51);function U(e){var t=e.match.params.username,a=Object(s.useState)(0),r=Object(y.a)(a,2),c=r[0],i=r[1],o=Object(s.useState)(0),l=Object(y.a)(o,2),j=l[0],h=l[1],d=Object(s.useState)(Date.now),b=Object(y.a)(d,2),u=b[0],m=b[1],p=Object(s.useState)(Date.now),x=Object(y.a)(p,2),g=x[0],v=x[1],f=Object(s.useState)(!1),C=Object(y.a)(f,2),S=C[0],w=C[1],P={year:"numeric",month:"short",day:"numeric"};return Object(s.useEffect)((function(){console.log("username"+t),O.a.get("/api/user/"+t,{withCredentials:!0}).then((function(e){200===e.status?(console.log(e.data),i(e.data.elims),h(e.data.deaths),m(new Date(e.data.createdAt).toLocaleDateString("en-US",P)),v(new Date(e.data.updatedAt).toLocaleDateString("en-US",P)),w(!1)):204===e.status&&w(!0)})).catch((function(e){console.log(e)}))})),S?Object(n.jsxs)(I.a,{variant:"danger",children:["No user found with username ",Object(n.jsx)("b",{children:t}),"."]},"danger"):Object(n.jsxs)("div",{className:"text-center",children:[Object(n.jsx)("h5",{children:t}),Object(n.jsxs)("p",{children:["Kills: ",Object(n.jsx)("b",{children:c})]}),Object(n.jsxs)("p",{children:["Deaths: ",Object(n.jsx)("b",{children:j})]}),Object(n.jsxs)("p",{children:["K/D: ",Object(n.jsx)("b",{children:(c/j).toFixed(2)})]}),Object(n.jsxs)("p",{children:["Account Created: ",Object(n.jsx)("b",{children:u})]}),Object(n.jsxs)("p",{children:["Last Login: ",Object(n.jsx)("b",{children:g})]})]})}var J=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.a.get("/api/login",{withCredentials:!0}).then((function(t){console.log(t.data),200===t.status&&(e.context.setIsAuth(!0),e.context.setUsername(t.data.username),e.context.setPartyCode(t.data.partyCode))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(n.jsx)(b.a,{children:Object(n.jsxs)(p.a,{children:[Object(n.jsx)(C,{}),Object(n.jsx)("br",{}),Object(n.jsx)(u.b,{path:"/",exact:!0,component:A}),Object(n.jsx)(u.b,{path:"/login",component:P}),Object(n.jsx)(u.b,{path:"/register",component:k}),Object(n.jsx)(u.b,{path:"/about",component:L}),Object(n.jsx)(u.b,{path:"/user/:username",render:function(e){return Object(n.jsx)(U,Object(o.a)({},e))}}),Object(n.jsx)(u.b,{path:"/help",component:D})]})})}}]),a}(s.Component);J.contextType=x;var F=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,89)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(g,{children:Object(n.jsx)(J,{})})}),document.getElementById("root")),F()}},[[87,1,2]]]);
//# sourceMappingURL=main.8e73a542.chunk.js.map